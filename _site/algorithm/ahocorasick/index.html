<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.2 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">
  <head>
    <!--폰트 : "Nanum Gothic Coding", "Coming Soon"-->
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Coming+Soon&family=Nanum+Gothic+Coding&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Coming+Soon&family=Nanum+Gothic+Coding&display=swap">
    
    <!--폰트 : "Iropke Batang"-->
    <link rel="preload" as="style" href="https://cdn.jsdelivr.net/font-iropke-batang/1.2/font-iropke-batang.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/font-iropke-batang/1.2/font-iropke-batang.css">

    <!--폰트 : "Cafe24Oneprettynight"-->
    
    <!--main.scss 조금이라도 빨리 로드 되길.. preload-->
    <link rel="preload" as="style" href="/assets/css/main.css">

    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>(C++) 문자열 검색 알고리즘 : 아호-코라식(Aho-Corasick) 알고리즘 | 기억저장소</title>
<meta name="description" content="🚀 서론 ">


  <meta name="author" content="민경">


<meta property="og:type" content="article">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="기억저장소">
<meta property="og:title" content="(C++) 문자열 검색 알고리즘 : 아호-코라식(Aho-Corasick) 알고리즘">
<meta property="og:url" content="http://localhost:4000/algorithm/ahocorasick/">


  <meta property="og:description" content="🚀 서론 ">







  <meta property="article:published_time" content="2021-04-23T00:00:00+09:00">



  <meta property="article:modified_time" content="2021-04-23T00:00:00+09:00">



  

  


<link rel="canonical" href="http://localhost:4000/algorithm/ahocorasick/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "민경",
      "url": "http://localhost:4000/"
    
  }
</script>






  <meta name="naver-site-verification" content="d935b83ed0c9e1792c19ef2115749434adc6144c">

<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="기억저장소 Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffdf24">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<!-- end custom head snippets -->

    <!-- 스크롤바 커스터마이징 -->
    <style> 
      ::-webkit-scrollbar{width: 16px;}
      ::-webkit-scrollbar-track {background-color:#4b4f52; border-radius: 16px;}
      ::-webkit-scrollbar-thumb {background-color:#5e6265; border-radius: 16px;}
      ::-webkit-scrollbar-thumb:hover {background: #ffd24c;}
      ::-webkit-scrollbar-button:start:decrement,::-webkit-scrollbar-button:end:increment 
      {
          width:12px;height:12px;background:transparent;}
      }  

      
    </style>
  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/logoImages.jpeg" alt=""></a>
        
        <a class="site-title" href="/">
          기억저장소
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/index.html">Home</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/">Category</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">카테고리 Click</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="http://localhost:4000/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#algorithm" itemprop="item"><span itemprop="name">Algorithm</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">(C++) 문자열 검색 알고리즘 : 아호-코라식(Aho-Corasick) 알고리즘</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">민경</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>개발공부를 기록하는 공간입니다.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">팔로우</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Incheon, South Korea</span>
        </li>
      

      
        
          
            <li><a href="mailto:wkdalsrud43@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
            <li><a href="https://github.com/wkdalsrud" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  

  
    

<nav class="nav__list">
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">카테고리 Click</label>
  <ul class="nav__items" id="category_tag_menu">
      <li>
            📂 <span style="font-family:'Cafe24Oneprettynight';">전체 글 수</style> <span style="font-family:'Coming Soon';">247</style> <span style="font-family:'Cafe24Oneprettynight';">개</style> 
      </li>
      <li>
        <span class="nav__sub-title">C/C++/C#</span>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>

        <span class="nav__sub-title">Coding Test</span>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/categories/algorithm" class="">알고리즘 구현 (with C++) (15)</a></li>
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/categories/programmers" class="">프로그래머스 (150)</a></li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/categories/boj" class="">백준 (35)</a></li>
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                        <li><a href="/categories/coding-test-lesson" class="">코딩 테스트 강의 (3)</a></li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/categories/codeup" class="">코드업 (12)</a></li>
                    
                
                    
                
                    
                
            </ul>

        <span class="nav__sub-title">Unity</span>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>

        <span class="nav__sub-title">UE4</span>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        
        <span class="nav__sub-title">CS</span>
            <ul>
                
                    
                        <li><a href="/categories/algorithm-lesson-1" class="">알고리즘 강의1 (2)</a></li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                        <li><a href="/categories/algorithm-lesson-2" class="">알고리즘 강의2 (15)</a></li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/categories/data-structure" class="">C 자료구조 강의 1(1)</a></li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/categories/data-structure2" class="">C 자료구조 강의 2(11)</a></li>
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        <span class="nav__sub-title">Server</span>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        <span class="nav__sub-title">DB</span>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        <span class="nav__sub-title">etc</span>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/categories/bitcoin" class="">블록체인 암호화폐 (3)</a></li>
                    
                
            </ul>
      </li>
      <li>	
            <br>      
            <img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fansohxxn.github.io&count_bg=%23FFCC35&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=visitors&edge_flat=false">
      </li>
  </ul>
</nav>


  

  </div>




  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="(C++) 문자열 검색 알고리즘 : 아호-코라식(Aho-Corasick) 알고리즘">
    <meta itemprop="description" content="🚀 서론">
    <meta itemprop="datePublished" content="2021-04-23T00:00:00+09:00">
    <meta itemprop="dateModified" content="2021-04-23T00:00:00+09:00">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">(C++) 문자열 검색 알고리즘 : 아호-코라식(Aho-Corasick) 알고리즘
</h1>
          
            <p class="page__meta"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Date:</strong> <time datetime="2021-04-23T00:00:00+09:00">2021.04.23</time>&nbsp&nbsp&nbsp<strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2021-04-23">2021.04.23</time></p>
          
          
            


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> 카테고리: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#algorithm" class="page__taxonomy-item-category" rel="tag">Algorithm</a>
    
    </span>
  </p>



  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 태그: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#coding-test" class="page__taxonomy-item-tag" rel="tag">Coding Test</a><span class="sep"> </span>
    
      
      
      <a href="/tags/#cpp" class="page__taxonomy-item-tag" rel="tag">Cpp</a><span class="sep"> </span>
    
      
      
      <a href="/tags/#algorithm" class="page__taxonomy-item-tag" rel="tag">Algorithm</a>
    
    </span>
  </p>

          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-align-left"></i> 목차</h4></header>
              <ul class="toc__menu">
  <li><a href="#-서론">🚀 서론</a>
    <ul>
      <li><a href="#-쓰임새">🔥 쓰임새</a></li>
      <li><a href="#-용어">🔥 용어</a></li>
      <li><a href="#-다른-방법들과의-비교--아호-코라식의-시간-복잡도">🔥 다른 방법들과의 비교 (+ 아호-코라식의 시간 복잡도)</a></li>
    </ul>
  </li>
  <li><a href="#-구현-코드-및-과정-설명">🚀 구현 코드 및 과정 설명</a>
    <ul>
      <li><a href="#-아호-코라식-개념-설명-두서없음-주의">🔥 아호-코라식 개념 설명 (두서없음 주의..)</a></li>
      <li><a href="#-전체-코드">🔥 전체 코드</a>
        <ul>
          <li><a href="#1️⃣-삽입-함수-트라이-만들기">1️⃣ 삽입 함수 (트라이 만들기)</a></li>
          <li><a href="#2️⃣-실패-함수-트라이를-bfs-순회하며-노드마다-실패-링크-만들어주기">2️⃣ 실패 함수 (트라이를 BFS 순회하며 노드마다 실패 링크 만들어주기)</a></li>
          <li><a href="#3️⃣-검색-함수-kmp-알고리즘-방식으로-트라이에서-검색">3️⃣ 검색 함수 (KMP 알고리즘 방식으로 트라이에서 검색)</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#-reference">📌 Reference</a></li>
</ul>

            </nav>
          </aside>
        
        <h2 id="-서론">🚀 서론</h2>

<p>아호 코라식 알고리즘을 이해하기 위해선 <strong>트라이 자료구조</strong>와 <strong>KMP 알고리즘</strong> 개념이 선행되어야 한다.(추가로 BFS 도 알고 있어야 한다.) 아호 코라식은 트라이 자료구조를 사용하며 KMP 알고리즘의 확장판이라고 볼 수 있기 때문이다. 자세한 설명은 아래 링크 참고 :)</p>

<ul>
  <li><a href="https://ansohxxn.github.io/algorithm/trie/">문자열 집합 : 트라이 자료구조</a></li>
  <li><a href="https://ansohxxn.github.io/algorithm/kmp/">문자열 검색 알고리즘 : KMP 알고리즘</a></li>
  <li><a href="https://ansohxxn.github.io/algorithm%20lesson%202/chapter4-4/">그래프 순회 방법 2️⃣ - BFS(너비 우선 탐색)</a></li>
</ul>

<p><br /></p>

<h3 id="-쓰임새">🔥 쓰임새</h3>

<blockquote>
  <p><u>여러 문자열</u>들을 동시에 찾아야 하는 <u>검색 엔진</u>에서 유용하게 사용되는 알고리즘</p>
</blockquote>

<ul>
  <li>KMP 👉 텍스트에서 검색어 하나를 찾아낼 때 사용 (1:1)</li>
  <li><u>아호 코라식</u> 👉 텍스트에서 <u>검색어 여러개를 동시에</u> 찾아낼 때 사용 (1:N)</li>
</ul>

<p>ex) “cacachefcachy” 텍스트에 { “cache”, “he”, “chef”, “archy” } 中 하나라도 부분 문자열로 포함되어 있는지 찾기.</p>

<p>아호코라식 알고리즘을 통해 수 많은 페이지에서 여러 검색어들이 부분적으로 포함된 각각의 위치들을 빠르게 찾아낼 수 있다.</p>

<p><br /></p>

<h3 id="-용어">🔥 용어</h3>

<ul>
  <li><em>텍스트</em>, <em>text</em> : 검색을 실행할 문자열. 이 문자열 내에 원하는 검색어가 있는지 탐색해보고자 함.
    <ul>
      <li>\(N\) : 텍스트의 길이</li>
    </ul>
  </li>
  <li><em>검색어</em>, <em>search</em>, <em>pattern</em> : 검색할 문자열. 검색이 된다면 <em>텍스트</em> 의 부분 문자열. 문자열 패턴 매칭을 하는 것과도 같기에 패턴이라고도 칭할 것.
    <ul>
      <li>\(M\) : 검색어의 길이</li>
      <li>\(k\) : 검색어의 총 개수 👉 <u>아호 코라식은 검색어가 여러개일 때 사용</u></li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h3 id="-다른-방법들과의-비교--아호-코라식의-시간-복잡도">🔥 다른 방법들과의 비교 (+ 아호-코라식의 시간 복잡도)</h3>

<ul>
  <li>브루트 포스
    <ul>
      <li>일일이 검색어들마다 텍스트와 브루트 포스로 비교한다면</li>
      <li>👉 \(O(nm_{1} + nm_{2} + nm_{3} + .. + nm_{k})\)</li>
    </ul>
  </li>
  <li>KMP 알고리즘을 N 번 실행
    <ul>
      <li>일일이 검색어들마다 텍스트와 KMP 알고리즘으로 비교</li>
      <li>👉 \(O(n + m_{1} + n + m_{2} + n + m_{3} + .. + n + m_{k}) = O(kn + m_{1} + m_{2} + m_{3} + .. + m_{k})\)
        <ul>
          <li>동일한 텍스트를 \(k\) 번 검사해야 하고 (\(kn\)) 검색어들 별로 실패 함수들 \(m_{1} + m_{2} + m_{3} + .. + m_{k}\) 을 따로 다 만들어야 한다.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>아호 코라식</strong>을 사용했을 때
    <ul>
      <li>일일이 검색어들마다 비교하지 않고, 검색어들을 트라이 트리에 모아두고 <u>한번에 순회한다.</u></li>
      <li>👉 \(O(n + m_{1} + m_{2} + .. + m_{k})\)
        <ul>
          <li>텍스트의 순회는 단 한번만 하면 된다. \(n\)</li>
          <li>검색어 별로 <u>실패 "링크"</u>를 만들 때 \(m_{1} + m_{2} + m_{3} + .. + m_{k}\)
            <ul>
              <li>아호 코라식은 실패 함수 “배열”을 만들지 않고 트라이에서 불일치시 돌아갈 실패 “링크” 를 만든다.</li>
              <li>이 실패 링크 또한 KMP 처럼 접두사 = 접미사의 최대 길이인 곳으로 돌아간다. A 검색어를 검사하는데서 불일치가 발생했다면 A 검색어의 접미사와 일치하는 다른 B 검색어의 접두사 노드로 간다!</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="-구현-코드-및-과정-설명">🚀 구현 코드 및 과정 설명</h2>

<p>아호 코라식 알고리즘은 <u>트라이 + KMP</u> 짬뽕</p>

<h3 id="-아호-코라식-개념-설명-두서없음-주의">🔥 아호-코라식 개념 설명 (두서없음 주의..)</h3>

<blockquote>
  <p>1️⃣ 검색어들은 트라이에 저장한다.</p>
</blockquote>

<p>트라이는 여러개의 문자열을 트리 형태로 저장하는 형태의 자료 구조이다. 또한 이 문자열들의 공통된 접두사는 하나의 노드로 묶여 탐색 공간이 줄어들기 때문에 이 트라이에 저장된 문자열들에서 내가 찾아보고자 하는 길이만큼의 시간만 들여서 빠르게 찾아낼 수 있다.</p>

<p>검색어가 여러개일 때, 텍스트 문자열에 이 검색어들이 각각 탐색되는지를 “빠르게” 알고 싶다면 이 검색어들을 트라이에 저장하여 여기서 탐색한다는 것이 아호 코라식의 아이디어다.</p>

<blockquote>
  <p>2️⃣ KMP 처럼 접두사 = 접미사 <u>실패함수를 미리 전처리 과정에서 구해놓는다.</u> 아호 코라식에선 “실패 링크”라고 불린다. 노드 별로 실패 링크를 만든다.</p>
</blockquote>

<p>KMP 와 달리 검색어가 여러개이기 때문에 걸칠 수 있는 그 대상은 검색어 하나가 아닌 여러개가 후보가 될 수 있다. 예를 들어 “블라블라AB” 까지 일치했었다면 이제 “AB” 를 접두사로 가진 ‘다른 검색어’로 이동할 수 있다는 것이다. “AB” 는 이미 일치했다고 걸쳐진 상태로 “AB” 로 시작하는 이 검색어를 텍스트와 비교하는 식이다. 즉, 걸칠 수 있는 다른 검색어로 비교 대상을 바꾸는 것이다.</p>

<p>노드별로 실패링크를 만든다는 것은 A 검색어의 원소와 텍스트를 비교해나가다가 불일치가 발생하면 A 검색어에서 <u>이전까지 일치한 부분 문자열의 접미사를 접두사로 가지는 다른 B 검색어 '노드'로 이동하도록</u> 하는 트라이 트리의 “링크”를 만들어주는 것이다.</p>

<p>여기서 한번 짚고 넘어가고 싶은 부분은 트라이 트리에 있어 “조상 및 부모 노드”는 이전 문자이며, “자식 노드”는 다음 문자라는 것에 주의하자. 직계 부모, 직계 조상이면 자신이 속한 그 문자열을 비롯하여 같은 접두사를 공유하는 문자열들 내에서의 “이전 문자”일테고 직계는 아니지만 그냥 나보다 깊이가 얕은 위의 노드들이면 다른 검색어에 속하지만 나보다 인덱스 상으로 더 앞의 문자가 될 것이다. 자식은 그 반대!</p>

<blockquote>
  <p>3️⃣ KMP 처럼 <u>탐색</u>시 접두사 = 접미사 최대 길이를 활용하고 <strong>걸치는 작업</strong>을 한다.</p>
</blockquote>

<p>실패 링크로 이동하는 것 자체가 <u>걸치는 작업</u>이다.</p>

<ul>
  <li>현재 A 노드(=글자)를 방문 중이라고 예를 들자면
    <ul>
      <li>KMP 와 비교
        <ul>
          <li>이전까지 일치한 문자열 👉 트라이 트리 안에서 A 글자까지 내려오면서 지나온 문자들</li>
          <li>이전까지 일치한 문자열의 접미사와 다른 문자열의 접두사 👉 다른 검색어로 비교 하기 위해 옮겨가, 해당 접두사를 걸쳐놓는 위치로 이동한다.
            <ul>
              <li>이미 전처리 과정에서 실패 링크를 다 만들어 놨기 때문에 다른 검색어의 걸칠 수 있는 그 위치로 이동하면 된다.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>📌 정리</p>
</blockquote>

<ul>
  <li>성공 링크
    <ul>
      <li>현재 노드(문자)가 비교 중인 텍스트 원소와 일치한다면 이동할 노드 링크
        <ul>
          <li>자식 노드(비교중인 검색어의 다음 문자)로 이동하는 링크이다.</li>
          <li>트라이를 만드는 과정인 <em>Inser</em> 삽입 함수 과정에서 자연스럽게 정해진다.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>실패 링크
    <ul>
      <li>현재 노드(문자)가 비교 중인 텍스트 원소와 일치하지 않는다면 이동할 노드 링크
        <ul>
          <li>다른 검색어에 걸칠 수 있는게 있다면, 즉!! 이전 노드까지의 접미사 중 다른 검색어의 접두사와 일치하는게 있다면, 즉!! 현재 방문 중인 노드의 부모 노드의 실패링크!
            <ul>
              <li>부모의 실패 링크를 타고 가면 나오는 노드에서도 현재 문자가 자식 노드(=다음 문자)로 <strong>연결 되는게 있다면</strong>
                <ul>
                  <li><u>현재 노드의 실패 링크는 부모 노드의 실패 링크의 자식 노드로 가게끔 연결해준다.</u> 즉, 현재 문자에서 불일치되면 현재문자는 이전 문자(부모 노드)까지의 접미사와 동일한 타 검색어의 접두사의 끝 문자가 되도록 이동을 할 수 있도록 하는 것이다.</li>
                  <li>예시
                    <ul>
                      <li>“블라블라AC” 는 <strong>불일치 발생시</strong> “AC블라블라” 로 이동 하도록 실패 링크를 놓을 수 있다.</li>
                      <li>“블라블라ACZ” 는 <strong>불일치 발생시</strong> “ACZ블라블라” 로 이동 하도록 실패 링크를 놓을 수 있다.</li>
                      <li>“블라블라AC” 의 자식인 “블라블라ACZ” 는 “블라블라AC” 의 실패 링크인 “AC블라블라” 의 자식인 “ACZ블라블라”를 실패 링크로 가질 수 있는 것이다. 단! “블라블라AC” 의 “C” 의 다음 글자가 “Z” 인게 트라이에 존재한다는 전제하에!</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>부모의 실패 링크를 타고 가면 나오는 노드에서도 현재 문자가 자식 노드(=다음 문자)로 <strong>연결 되는게 없다면</strong>
                <ul>
                  <li>루트로 돌아갈 떄까지, 혹은 현재 문자가 접두사의 끝이 될 수 있을 때까지 부모의 실패링크를 타고 올라가고 그 노드의 실패 링크를 또 타고 올라가고를 반복하여 올라간다.</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>전체적으로 이렇게 가장 가까운 조상인 직계 부모의 실패링크부터 검사를 하고, 연결되는게 없다면 타고타고 올라가고 하기 때문에 접두사 = 접미사의 “최대 길이”라는 것이 자연스럽게 보장이 된다.
            <ul>
              <li>조상 노드들부터 이렇게 실패 링크를 결정 지어 왔기 때문에 DP 방식으로 생각하면 된다.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>밑에서 더 자세히 설명하겠지만 BFS 방식으로 루트부터 깊이대로 차례 차례 노드 들을 방문해 내려오면서 각각 실패 링크를 만들어 준다. 그래서 현재 노드의 실패 링크를 결정하고자 하는 시점엔 이미 그의 조상 노드들의 실패 링크는 모두 정해진 상태이다. 만약 재귀 호출 방식으로 DFS 를 사용한다면 직계 부모의 실패 링크는 알 수 있지만 실패 링크를 따라간 노드의 실패 링크는 알 수가 없을 수도 있기 때문이다.(아직 실패링크 안 만든 상태일 수도) 따라서 BFS 를 통해 깊이대로 차례 차례 실패 링크를 만든다.</p>

<p>전체적으로 말로 풀어서 설명하기가 너무 어렵다. 😅 그러니 밑에 도식화 한 과정을 보며 이해해보자.</p>

<p><br /></p>

<h3 id="-전체-코드">🔥 전체 코드</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;bits/stdc++.h&gt;</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">struct</span> <span class="nc">Trie</span> <span class="p">{</span> <span class="c1">// 노드 객체 클래스</span>
<span class="nl">public:</span>
	<span class="kt">bool</span> <span class="n">isEnd</span><span class="p">;</span> <span class="c1">// 이 노드가 한 검색어의 끝인지 아닌지를 알려줌 </span>
	<span class="n">string</span> <span class="n">p</span><span class="p">;</span>   <span class="c1">// 이 노드까지의 접두사 (아호 코라식의 필요한 부분은 아니다.)</span>
	<span class="n">map</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">Trie</span><span class="o">*&gt;</span> <span class="n">child</span><span class="p">;</span> <span class="c1">// 자식 노드 링크</span>
	<span class="n">Trie</span><span class="o">*</span> <span class="n">fail</span><span class="p">;</span> <span class="c1">// 실패 링크 ⭐</span>

	<span class="n">Trie</span><span class="p">()</span> <span class="o">:</span> <span class="n">isEnd</span><span class="p">(</span><span class="nb">false</span><span class="p">),</span> <span class="n">fail</span><span class="p">(</span><span class="nb">nullptr</span><span class="p">)</span> <span class="p">{}</span>

	<span class="kt">void</span> <span class="n">Insert</span><span class="p">(</span><span class="n">string</span> <span class="n">pattern</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">Trie</span><span class="o">*</span> <span class="n">now</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">pattern</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">pattern</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
				<span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">pattern</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Trie</span><span class="p">;</span>
			<span class="n">now</span> <span class="o">=</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">pattern</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">now</span><span class="o">-&gt;</span><span class="n">p</span> <span class="o">=</span> <span class="n">pattern</span><span class="p">;</span>
				<span class="n">now</span><span class="o">-&gt;</span><span class="n">isEnd</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="kt">void</span> <span class="n">Fail</span><span class="p">()</span> <span class="p">{</span>  <span class="c1">// BFS + KMP</span>
		<span class="n">Trie</span><span class="o">*</span> <span class="n">root</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
		<span class="n">queue</span><span class="o">&lt;</span><span class="n">Trie</span><span class="o">*&gt;</span> <span class="n">q</span><span class="p">;</span>

		<span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>

		<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">q</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
			<span class="n">Trie</span><span class="o">*</span> <span class="n">now</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">();</span>
			<span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>

			<span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">ch</span> <span class="o">:</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">)</span> <span class="p">{</span>

				<span class="n">Trie</span><span class="o">*</span> <span class="n">next</span> <span class="o">=</span> <span class="n">ch</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">now</span> <span class="o">==</span> <span class="n">root</span><span class="p">)</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
				<span class="k">else</span> <span class="p">{</span>
					<span class="n">Trie</span><span class="o">*</span> <span class="n">prev</span> <span class="o">=</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">fail</span><span class="p">;</span>
					<span class="k">while</span> <span class="p">(</span><span class="n">prev</span> <span class="o">!=</span> <span class="n">root</span> <span class="o">&amp;&amp;</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">==</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">fail</span><span class="p">;</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">];</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span>
				<span class="p">}</span>

				<span class="k">if</span> <span class="p">(</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span><span class="o">-&gt;</span><span class="n">isEnd</span><span class="p">)</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">isEnd</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

				<span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">next</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">KMP</span><span class="p">(</span><span class="n">string</span> <span class="n">text</span><span class="p">,</span> <span class="n">Trie</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">Trie</span><span class="o">*</span> <span class="n">now</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
	<span class="n">vector</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">answer</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">while</span> <span class="p">(</span><span class="n">now</span> <span class="o">!=</span> <span class="n">root</span> <span class="o">&amp;&amp;</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">text</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
			<span class="n">now</span> <span class="o">=</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">fail</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">text</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">!=</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
			<span class="n">now</span> <span class="o">=</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">text</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">now</span><span class="o">-&gt;</span><span class="n">isEnd</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">answer</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">,</span> <span class="n">i</span> <span class="p">});</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">answer</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="n">freopen</span><span class="p">(</span><span class="s">"input.txt"</span><span class="p">,</span> <span class="s">"r"</span><span class="p">,</span> <span class="n">stdin</span><span class="p">);</span>

	<span class="kt">int</span> <span class="n">N</span><span class="p">;</span>
	<span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">N</span><span class="p">;</span>
	<span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">patterns</span><span class="p">(</span><span class="n">N</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
		<span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">patterns</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
	<span class="n">Trie</span><span class="o">*</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Trie</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
		<span class="n">root</span><span class="o">-&gt;</span><span class="n">Insert</span><span class="p">(</span><span class="n">patterns</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
	<span class="n">root</span><span class="o">-&gt;</span><span class="n">Fail</span><span class="p">();</span>

	<span class="n">string</span> <span class="n">text</span><span class="p">;</span>
	<span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">text</span><span class="p">;</span>

	<span class="n">vector</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">answer</span> <span class="o">=</span> <span class="n">KMP</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">root</span><span class="p">);</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">text</span> <span class="o">&lt;&lt;</span> <span class="s">"에서 검색하기"</span> <span class="o">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">answer</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> 
		<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"확인된 검색어 : "</span> <span class="o">&lt;&lt;</span> <span class="n">answer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">first</span> <span class="o">&lt;&lt;</span> <span class="s">", 위치 : "</span> <span class="o">&lt;&lt;</span> <span class="n">answer</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">second</span> <span class="o">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>💎입력💎

검색어 👉 cache, he, chef, achy
텍스트 👉 cacachefcachy
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>💎출력💎

cacachefcachy에서 검색하기
확인된 검색어 : cache, 위치 : 6
확인된 검색어 : chef, 위치 : 7
확인된 검색어 : achy, 위치 : 12
</code></pre></div></div>

<p><br /></p>

<h4 id="1️⃣-삽입-함수-트라이-만들기">1️⃣ 삽입 함수 (트라이 만들기)</h4>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// Trie 트라이의 멤버 함수</span>
  <span class="c1">// 📌 노드들의 성공 링크 결정</span>
	<span class="kt">void</span> <span class="nf">Insert</span><span class="p">(</span><span class="n">string</span> <span class="n">pattern</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">Trie</span><span class="o">*</span> <span class="n">now</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">pattern</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">pattern</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
				<span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">pattern</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Trie</span><span class="p">;</span>
			<span class="n">now</span> <span class="o">=</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">pattern</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">now</span><span class="o">-&gt;</span><span class="n">p</span> <span class="o">=</span> <span class="n">pattern</span><span class="p">;</span>
				<span class="n">now</span><span class="o">-&gt;</span><span class="n">isEnd</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
</code></pre></div></div>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115852460-11a9f280-a463-11eb-931e-50554633aa00.png" alt="image" /></p>

<p>가장 첫 번째로 해주어야할 작업은 검색어들을 트라이 트리에 삽입하는 것이다. 검색어의 마지막 글자엔 해당 검색어를 문자열 <code class="language-plaintext highlighter-rouge">p</code>에 할당해주고 <code class="language-plaintext highlighter-rouge">isEnd</code> 를 True 로 바꾸었다. 진한 노란색은 <code class="language-plaintext highlighter-rouge">isEnd</code>가 True인 단어의 끝을 의미한다.</p>

<p><img src="https://user-images.githubusercontent.com/42318591/115852481-166ea680-a463-11eb-8186-b4b3dba71797.png" alt="image" /></p>

<p>원래 실제 메모리상으론 첫 번째 그림처럼 되는게 맞다. 그러나 아호 코라식 과정을 이해하는데 도움이 되기 위하여 두 번째 그림과 같이 해당 글자까지의 접두사로 노드를 표현하겠다.</p>

<p><br /></p>

<h4 id="2️⃣-실패-함수-트라이를-bfs-순회하며-노드마다-실패-링크-만들어주기">2️⃣ 실패 함수 (트라이를 BFS 순회하며 노드마다 실패 링크 만들어주기)</h4>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// Trie 트라이의 멤버 함수</span>
  <span class="c1">// 📌 노드들의 실패 링크 결정</span>
	<span class="kt">void</span> <span class="nf">Fail</span><span class="p">()</span> <span class="p">{</span>  <span class="c1">// BFS + KMP</span>
		<span class="n">Trie</span><span class="o">*</span> <span class="n">root</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
		<span class="n">queue</span><span class="o">&lt;</span><span class="n">Trie</span><span class="o">*&gt;</span> <span class="n">q</span><span class="p">;</span>

		<span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>

		<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">q</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
			<span class="n">Trie</span><span class="o">*</span> <span class="n">now</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">front</span><span class="p">();</span> <span class="c1">// 방문 중인 노드</span>
			<span class="n">q</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>

      <span class="cm">/* 자식 노드들 큐에 삽입 및 실패 링크 만들어주기 */</span>
			<span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">ch</span> <span class="o">:</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">)</span> <span class="p">{</span>

				<span class="n">Trie</span><span class="o">*</span> <span class="n">next</span> <span class="o">=</span> <span class="n">ch</span><span class="p">.</span><span class="n">second</span><span class="p">;</span> <span class="c1">// 자식 노드 (now 의 자식 next)</span>
        <span class="c1">// 부모(now)가 루트 노드라면 실패 링크는 루트로 한다. </span>
        <span class="c1">// 첫 문자부터 불일치였다면 걸칠 수 있는게 없기 때문이다.</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">now</span> <span class="o">==</span> <span class="n">root</span><span class="p">)</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
        <span class="c1">// 부모(now)가 루트 노드가 아니라면</span>
				<span class="k">else</span> <span class="p">{</span>
					<span class="n">Trie</span><span class="o">*</span> <span class="n">prev</span> <span class="o">=</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">fail</span><span class="p">;</span> <span class="c1">// 부모 노드(= 이전 문자)의 실패 링크! 현재 노드(next) 까지 도달 했다는 것은 부모 노드(= 이전 문자)까진 일치했었다는 뜻이다.</span>
          <span class="c1">// 부모의 실패 링크에 현재 문자(next)가 자식 노드로 연결되지 않았다면, 즉 자식으로 없다면! 혹시 그 실패 링크가 루트 노드가 되거나 현재 문자를 자식으로 둔 노드를 찾을 떄까지 실패 링크를 타고 타고 올라간다.</span>
          <span class="c1">// 접미사 = 접두사인 타 검색어의 접두사를 찾을 때까지 올라감</span>
          <span class="c1">// 타고 타고 올라갈 수록 접미사 = 접두사의 길이는 짧아질 수 밖에 없다.</span>
					<span class="k">while</span> <span class="p">(</span><span class="n">prev</span> <span class="o">!=</span> <span class="n">root</span> <span class="o">&amp;&amp;</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">==</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">fail</span><span class="p">;</span>
          <span class="c1">// 현재 노드(next)의 실패링크를 결정한 실패링크의 자식 노드로 연결</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">];</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span>
				<span class="p">}</span>
        <span class="c1">// che 의 실패링크가 he 라면, 근데 he 가 완전한 단어의 모습이라면! chef 의 che 또한 isEnd 가 true 가 될 수 있다. che 에서 불일치가 발생하더라도 그건 완전한 검색어 he 로도 걸칠 수 있기 때문이다.</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span><span class="o">-&gt;</span><span class="n">isEnd</span><span class="p">)</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">isEnd</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

				<span class="n">q</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">next</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>

</code></pre></div></div>

<hr />

<blockquote>
  <p>BFS 순회</p>
</blockquote>

<ul>
  <li>회색 별표 : 현재 방문 중인 노드 <code class="language-plaintext highlighter-rouge">now</code> (= 현재 노드인 <code class="language-plaintext highlighter-rouge">next</code>의 부모)</li>
  <li>노란 화살표 : 성공 링크</li>
  <li>주황 화살표 : 실패 링크
    <ul>
      <li>볼드체는 현재 예약 중인 노드 <code class="language-plaintext highlighter-rouge">next</code> 에게  방금 만들어준 실패 링크</li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115852572-30a88480-a463-11eb-9ec6-cfa28753ea5c.png" alt="image" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>				<span class="k">if</span> <span class="p">(</span><span class="n">now</span> <span class="o">==</span> <span class="n">root</span><span class="p">)</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
</code></pre></div></div>

<blockquote>
  <p>“a” 에서 불일치가 발생한다면?</p>
</blockquote>

<ul>
  <li>부모가 루트이기 때문에 실패 링크는 루트로 한다.
    <ul>
      <li>이전 문자가 하나도 없기 때문에 이전 문자에서 접두사 = 접미사를 찾을 수 없어 처음부터 찾도록 실패시 트라이의 루트로 돌아가도록 한다.</li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115852590-34d4a200-a463-11eb-88e8-1b8fabba942b.png" alt="image" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>				<span class="k">if</span> <span class="p">(</span><span class="n">now</span> <span class="o">==</span> <span class="n">root</span><span class="p">)</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
</code></pre></div></div>

<blockquote>
  <p>“c” 에서 불일치가 발생한다면?</p>
</blockquote>

<ul>
  <li>부모가 루트이기 때문에 실패 링크는 루트로 한다.
    <ul>
      <li>이전 문자가 하나도 없기 때문에 이전 문자에서 접두사 = 접미사를 찾을 수 없어 처음부터 찾도록 실패시 트라이의 루트로 돌아가도록 한다.</li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115852610-3a31ec80-a463-11eb-94be-34eeac39a2e6.png" alt="image" /></p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>				<span class="k">if</span> <span class="p">(</span><span class="n">now</span> <span class="o">==</span> <span class="n">root</span><span class="p">)</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
</code></pre></div></div>

<blockquote>
  <p>“h” 에서 불일치가 발생한다면?</p>
</blockquote>

<ul>
  <li>부모가 루트이기 때문에 실패 링크는 루트로 한다.
    <ul>
      <li>이전 문자가 하나도 없기 때문에 이전 문자에서 접두사 = 접미사를 찾을 수 없어 처음부터 찾도록 실패시 트라이의 루트로 돌아가도록 한다.</li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115852632-4158fa80-a463-11eb-815f-0bda989e0dd9.png" alt="image" /></p>

<blockquote>
  <p>“ac” 의 “c” 에서 불일치가 발생한다면 ?</p>
</blockquote>

<p>“ac”의 가능한 접미사는 “c” 뿐이다.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>					<span class="k">if</span> <span class="p">(</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">];</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>부모인 “a” 의 실패 링크가 루트인데 루트의 자식으로 “c” 가 있다.
    <ul>
      <li>즉, “c” 로 시작하는 접두사가 있다는 의미이다. 실패시 이 “c” 로 이동하도록 한다.</li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115852657-48800880-a463-11eb-85d7-891f51c318b2.png" alt="image" /></p>

<blockquote>
  <p>“ca” 의 “a” 에서 불일치가 발생한다면 ?</p>
</blockquote>

<p>“ca”의 가능한 접미사는 “a” 뿐이다.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>					<span class="k">if</span> <span class="p">(</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">];</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>부모인 “c” 의 실패 링크가 루트인데 루트의 자식으로 “a” 가 있다.
    <ul>
      <li>즉, “a” 로 시작하는 접두사가 있다는 의미이다. 실패시 이 “a” 로 이동하도록 한다.</li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115852688-4e75e980-a463-11eb-8bee-e08528716c43.png" alt="image" /></p>

<blockquote>
  <p>“ch” 의 “h” 에서 불일치가 발생한다면 ?</p>
</blockquote>

<p>“ch”의 가능한 접미사는 “h” 뿐이다.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>					<span class="k">if</span> <span class="p">(</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">];</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>부모인 “c” 의 실패 링크가 루트인데 루트의 자식으로 “h” 가 있다.
    <ul>
      <li>즉, “h” 로 시작하는 접두사가 있다는 의미이다. 실패시 이 “h” 로 이동하도록 한다.</li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115944985-39956680-a4f4-11eb-9f91-1476ff954461.png" alt="image" /></p>

<blockquote>
  <p>“he” 의 “e” 에서 불일치가 발생한다면 ?</p>
</blockquote>

<p>“he”의 가능한 접미사는 “e” 뿐이다.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>부모인 “h” 의 실패 링크가 루트인데 루트의 자식으로 “e” 가 없다.
    <ul>
      <li>즉, “e” 로 시작하는 접두사가 없다는 의미이다.
        <ul>
          <li>부모 실패 링크가 루트이니 while 에도 걸리지 않고, 부모 실패링크의 자식으로 “e” 가 없으니 if 문에도 걸리지 않는다.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>부모의 실패 링크인 루트가 그대로 할당 된다.
    <ul>
      <li>“he” 의 “e” 에서 불일치가 발생한다면 “he” 보다 짧은 것 중 “e” 로 시작할 수 있는게 없기 때문에 루트로 향한다.</li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115852732-5cc40580-a463-11eb-84fa-4508c5e0705d.png" alt="image" /></p>

<blockquote>
  <p>“ach” 의 “h” 에서 불일치가 발생한다면 ?</p>
</blockquote>

<p>“ach” 의 가능한 접미사는 “h”, “ch” 가 있다. (길이가 긴게 선택될 수록 좋다. 현재 노드와 가까운 실패링크일 수록 길이가 길다.)</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>					<span class="k">if</span> <span class="p">(</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">];</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>부모인 “ac” 의 실패 링크인 “c”의 자식으로 “h” 가 있다.
    <ul>
      <li>즉, “ch” 로 시작하는 접두사가 있다는 의미이다. 실패시 이 “ch” 로 이동하도록 한다.</li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115852752-62b9e680-a463-11eb-9095-2af5955f5e2f.png" alt="image" /></p>

<blockquote>
  <p>“cac” 의 “c” 에서 불일치가 발생한다면 ?</p>
</blockquote>

<p>“cac” 의 가능한 접미사는 “c”, “ac” 가 있다. (길이가 긴게 선택될 수록 좋다. 현재 노드와 가까운 실패링크일 수록 길이가 길다.)</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>					<span class="k">if</span> <span class="p">(</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">];</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>부모인 “ca” 의 실패 링크인 “a”의 자식으로 “c” 가 있다.
    <ul>
      <li>즉, “ac” 로 시작하는 접두사가 있다는 의미이다. 실패시 이 “ac” 로 이동하도록 한다.</li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115945625-8595da80-a4f7-11eb-8b7d-e7c25e50bc23.png" alt="image" /></p>

<blockquote>
  <p>“che” 의 “e” 에서 불일치가 발생한다면 ?</p>
</blockquote>

<p>“che” 의 가능한 접미사는 “e”, “he” 가 있다. (길이가 긴게 선택될 수록 좋다. 현재 노드와 가까운 실패링크일 수록 길이가 길다.)</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>					<span class="k">if</span> <span class="p">(</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">];</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>부모인 “ch” 의 실패 링크인 “h”의 자식으로 “he” 가 있다.
    <ul>
      <li>즉, “he” 로 시작하는 접두사가 있다는 의미이다. 실패시 이 “he” 로 이동하도록 한다.</li>
    </ul>
  </li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>				<span class="k">if</span> <span class="p">(</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span><span class="o">-&gt;</span><span class="n">isEnd</span><span class="p">)</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">isEnd</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</code></pre></div></div>

<p>“che” 의 실패링크인 “he” 는 단어의 끝이다. 즉, “che” 에 “he” 검색어가 포함되어 있다는 것이다. 따라서 “che” 의 <code class="language-plaintext highlighter-rouge">isEnd</code>도 True 로 체크를 해준다. (진한 노란색으로 색 바꿔줌)</p>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115945633-8a5a8e80-a4f7-11eb-9364-5454011e0f51.png" alt="image" /></p>

<p>“he” 의 자식은 아무것도 없기 때문에 for문 예약 작업 하지 않고 넘어간다.</p>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115945636-8fb7d900-a4f7-11eb-9ca5-b13bdc8af65d.png" alt="image" /></p>

<blockquote>
  <p>“achy” 의 “y” 에서 불일치가 발생한다면 ?</p>
</blockquote>

<p>“achy” 의 가능한 접미사는 “y”, “hy”, “chy” 가 있다. (길이가 긴게 선택될 수록 좋다. 현재 노드와 가까운 실패링크일 수록 길이가 길다.)</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>					<span class="k">while</span> <span class="p">(</span><span class="n">prev</span> <span class="o">!=</span> <span class="n">root</span> <span class="o">&amp;&amp;</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">==</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">fail</span><span class="p">;</span>
          <span class="c1">// if 는 false</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>부모인 “ach” 의 실패 링크인 “ch”의 자식으로 “y” 가 없다. 👉 “chy” 로 걸칠 수 있는 접두사 없음
    <ul>
      <li>부모의 실패링크가 루트도 아니기 때문에 while 문을 돌며 “hy”, “y” 로 걸칠 수 있을지 각각 검사하러 간다.
        <ul>
          <li>“ch” 의 실패 링크인 “h”의 자식으로 “y” 가 없다.</li>
          <li>“h” 의 실패 링크인 루트의 자식으로 “y” 가 없다.</li>
        </ul>
      </li>
      <li>결국 “hy”, “y” 접두사도 존재하지 않기에 “ach” 의 실패 링크는 루트가 된다.</li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115945640-95152380-a4f7-11eb-9b22-697545f2a9d6.png" alt="image" /></p>

<blockquote>
  <p>“cach” 의 “h” 에서 불일치가 발생한다면 ?</p>
</blockquote>

<p>“cach” 의 가능한 접미사는 “h”, “ch”, “ach” 가 있다. (길이가 긴게 선택될 수록 좋다. 현재 노드와 가까운 실패링크일 수록 길이가 길다.)</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>					<span class="k">if</span> <span class="p">(</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">];</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>부모인 “cac” 의 실패 링크인 “ac”의 자식으로 “ach” 가 있다.
    <ul>
      <li>즉, “ach” 로 시작하는 접두사가 있다는 의미이다. 실패시 이 “ach” 로 이동하도록 한다.</li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115945643-99414100-a4f7-11eb-918e-6460e503dcd5.png" alt="image" /></p>

<blockquote>
  <p>“chef” 의 “f” 에서 불일치가 발생한다면 ?</p>
</blockquote>

<p>“chef” 의 가능한 접미사는 “f”, “ef”, “hef” 가 있다. (길이가 긴게 선택될 수록 좋다. 현재 노드와 가까운 실패링크일 수록 길이가 길다.)</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>					<span class="k">while</span> <span class="p">(</span><span class="n">prev</span> <span class="o">!=</span> <span class="n">root</span> <span class="o">&amp;&amp;</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">==</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">fail</span><span class="p">;</span>
          <span class="c1">// if 문은 false</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>부모인 “che” 의 실패 링크인 “he”의 자식으로 “y” 가 없다. 👉 “hef” 로 걸칠 수 있는 접두사 없음
    <ul>
      <li>부모의 실패링크가 루트도 아니기 때문에 while 문을 돌며 “ef”, “f” 로 걸칠 수 있을지 각각 검사하러 간다.
        <ul>
          <li>“he” 의 실패 링크인 루트의 자식으로 “f” 가 없다.</li>
        </ul>
      </li>
      <li>결국 “ef”, “f” 접두사도 존재하지 않기에 “chef” 의 실패 링크는 루트가 된다.</li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115945647-9e05f500-a4f7-11eb-97a4-d318ec648e2a.png" alt="image" /></p>

<p>“achy” 의 자식은 아무것도 없기 때문에 for문 예약 작업 하지 않고 넘어간다.</p>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115945657-a2321280-a4f7-11eb-88e0-8c59def7c277.png" alt="image" /></p>

<blockquote>
  <p>“cache” 의 “e” 에서 불일치가 발생한다면 ?</p>
</blockquote>

<p>“cache” 의 가능한 접미사는 “e”, “he”, “che”, “ache” 가 있다. (길이가 긴게 선택될 수록 좋다. 현재 노드와 가까운 실패링크일 수록 길이가 길다.)</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>					<span class="k">while</span> <span class="p">(</span><span class="n">prev</span> <span class="o">!=</span> <span class="n">root</span> <span class="o">&amp;&amp;</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">==</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">fail</span><span class="p">;</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="c1">// if 도 True 가 됨!</span>
						<span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">ch</span><span class="p">.</span><span class="n">first</span><span class="p">];</span>
					<span class="n">next</span><span class="o">-&gt;</span><span class="n">fail</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>부모인 “cach” 의 실패 링크인 “ach”의 자식으로 “e” 가 없다. 👉 “ache” 로 걸칠 수 있는 접두사 없음
    <ul>
      <li>부모의 실패링크가 루트도 아니기 때문에 while 문을 돌며 “che”, “he”, “e” 로 걸칠 수 있을지 각각 검사하러 간다.
        <ul>
          <li>“ach” 의 실패 링크인 “ch”의 자식으로 “e” 가 있다. (while문 종료)</li>
        </ul>
      </li>
      <li>따라서 “cache” 의 실패 링크는 “che” 가 된다.</li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115945661-a65e3000-a4f7-11eb-8132-ea85d5cdcba0.png" alt="image" /></p>

<p>“chef” 의 자식은 아무것도 없기 때문에 for문 예약 작업 하지 않고 넘어간다.</p>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115945666-ab22e400-a4f7-11eb-832e-d091310459a6.png" alt="image" /></p>

<p>“cache” 의 자식은 아무것도 없기 때문에 for문 예약 작업 하지 않고 넘어간다.</p>

<hr />

<p><br /></p>

<h4 id="3️⃣-검색-함수-kmp-알고리즘-방식으로-트라이에서-검색">3️⃣ 검색 함수 (KMP 알고리즘 방식으로 트라이에서 검색)</h4>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 전역 함수</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">KMP</span><span class="p">(</span><span class="n">string</span> <span class="n">text</span><span class="p">,</span> <span class="n">Trie</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">Trie</span><span class="o">*</span> <span class="n">now</span> <span class="o">=</span> <span class="n">root</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
	<span class="n">vector</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">answer</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 텍스트 글자가 현재 방문 중인 노드(검색어 글자)와 일치하지 않는다면 👉 일치하는게 하나도 없는 상태(now == root)가 되거나 일치할 때까지 실패 링크 타기</span>
		<span class="k">while</span> <span class="p">(</span><span class="n">now</span> <span class="o">!=</span> <span class="n">root</span> <span class="o">&amp;&amp;</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">text</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">==</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> 
			<span class="n">now</span> <span class="o">=</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">fail</span><span class="p">;</span>
    <span class="c1">// 일치한다면 성공링크 타고 내려가기</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">text</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">!=</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> 
			<span class="n">now</span> <span class="o">=</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">child</span><span class="p">[</span><span class="n">text</span><span class="p">[</span><span class="n">i</span><span class="p">]];</span> 
    <span class="c1">// 검색어를 찾았다면</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">now</span><span class="o">-&gt;</span><span class="n">isEnd</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">answer</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span> <span class="n">now</span><span class="o">-&gt;</span><span class="n">p</span><span class="p">,</span> <span class="n">i</span> <span class="p">});</span> <span class="c1">// 그 문자열과 위치를 answer 에 담도록 하였다.</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">answer</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>일치할 경우 “성공 링크”를 타고 내려간다. (노란 화살표)</li>
  <li>일치하지 않을 경우, 일치할 때까지 (혹은 루트가 될 때까지) “실패 링크”를 타고 올라간다. (주황 화살표)</li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115952115-4c716080-a51f-11eb-8387-dc78ce8f1553.png" alt="image" /></p>

<blockquote>
  <p>텍스트 : <u>c</u> a c a c h e f c a c h y</p>
</blockquote>

<ul>
  <li>현재 방문 노드 : 루트</li>
  <li>루트의 성공 링크 (첫 번째 if)
    <ul>
      <li>루트의 자식인 <code class="language-plaintext highlighter-rouge">c</code> 로 이동</li>
    </ul>
  </li>
  <li>아직 검색어 찾지 못함 (두 번째 if)</li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115952119-52ffd800-a51f-11eb-81e9-b0c0e5c682af.png" alt="image" /></p>

<blockquote>
  <p>텍스트 : c <u>a</u> c a c h e f c a c h y</p>
</blockquote>

<ul>
  <li>현재 방문 노드 : <code class="language-plaintext highlighter-rouge">c</code></li>
  <li><code class="language-plaintext highlighter-rouge">c</code>의 성공 링크 (첫 번째 if)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">c</code>의 자식인 <code class="language-plaintext highlighter-rouge">ca</code> 로 이동</li>
    </ul>
  </li>
  <li>아직 검색어 찾지 못함 (두 번째 if)</li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115952133-585d2280-a51f-11eb-9058-38ab21b1f598.png" alt="image" /></p>

<blockquote>
  <p>텍스트 : c a <u>c</u> a c h e f c a c h y</p>
</blockquote>

<ul>
  <li>현재 방문 노드 : <code class="language-plaintext highlighter-rouge">ca</code></li>
  <li><code class="language-plaintext highlighter-rouge">ca</code>의 성공 링크 (첫 번째 if)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ca</code>의 자식인 <code class="language-plaintext highlighter-rouge">cac</code> 로 이동</li>
    </ul>
  </li>
  <li>아직 검색어 찾지 못함 (두 번째 if)</li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115952136-5dba6d00-a51f-11eb-859f-4962e4aa6539.png" alt="image" /></p>

<blockquote>
  <p>텍스트 : c a c <u>a</u> c h e f c a c h y</p>
</blockquote>

<ul>
  <li>현재 방문 노드 : <code class="language-plaintext highlighter-rouge">cac</code></li>
  <li>실패 링크 (while)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">cac</code>의 자식엔 <code class="language-plaintext highlighter-rouge">caca</code> 가 없다. 👉 <code class="language-plaintext highlighter-rouge">cac</code>의 실패 링크인 <code class="language-plaintext highlighter-rouge">ac</code> 로 이동</li>
      <li><code class="language-plaintext highlighter-rouge">ac</code>의 자식엔 <code class="language-plaintext highlighter-rouge">aca</code> 가 없다. 👉 <code class="language-plaintext highlighter-rouge">ac</code> 의 실패 링크인 <code class="language-plaintext highlighter-rouge">c</code> 로 이동</li>
      <li><code class="language-plaintext highlighter-rouge">c</code>의 자식엔 <code class="language-plaintext highlighter-rouge">ca</code> 가 있다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">c</code>의 성공 링크 (첫 번째 if)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">c</code>의 자식인 <code class="language-plaintext highlighter-rouge">ca</code> 로 이동</li>
    </ul>
  </li>
  <li>아직 검색어 찾지 못함 (두 번째 if)</li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115952141-627f2100-a51f-11eb-8bbc-a5ccf49d6a7c.png" alt="image" /></p>

<blockquote>
  <p>텍스트 : c a c a <u>c</u> h e f c a c h y</p>
</blockquote>

<ul>
  <li>현재 방문 노드 : <code class="language-plaintext highlighter-rouge">ca</code></li>
  <li><code class="language-plaintext highlighter-rouge">ca</code>의 성공 링크 (첫 번째 if)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ca</code>의 자식인 <code class="language-plaintext highlighter-rouge">cac</code> 로 이동</li>
    </ul>
  </li>
  <li>아직 검색어 찾지 못함 (두 번째 if)</li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115952147-68750200-a51f-11eb-8a67-bebadea1cec2.png" alt="image" /></p>

<blockquote>
  <p>텍스트 : c a c a c <u>h</u> e f c a c h y</p>
</blockquote>

<ul>
  <li>현재 방문 노드 : <code class="language-plaintext highlighter-rouge">cac</code></li>
  <li><code class="language-plaintext highlighter-rouge">cac</code>의 성공 링크 (첫 번째 if)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">cac</code>의 자식인 <code class="language-plaintext highlighter-rouge">cach</code> 로 이동</li>
    </ul>
  </li>
  <li>아직 검색어 찾지 못함 (두 번째 if)</li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115952153-6dd24c80-a51f-11eb-8c55-f60ff9fdea6b.png" alt="image" /></p>

<blockquote>
  <p>텍스트 : c a c a c h <u>e</u> f c a c h y</p>
</blockquote>

<ul>
  <li>현재 방문 노드 : <code class="language-plaintext highlighter-rouge">cach</code></li>
  <li><code class="language-plaintext highlighter-rouge">cach</code>의 성공 링크 (첫 번째 if)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">cach</code>의 자식인 <code class="language-plaintext highlighter-rouge">cache</code> 로 이동</li>
    </ul>
  </li>
  <li>검색어 찾음 ! ! ! (두 번째 if)</li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115952156-72970080-a51f-11eb-8957-5f4b362263af.png" alt="image" /></p>

<blockquote>
  <p>텍스트 : c a c a c h e <u>f</u> c a c h y</p>
</blockquote>

<ul>
  <li>현재 방문 노드 : <code class="language-plaintext highlighter-rouge">cache</code></li>
  <li>실패 링크 (while)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">cache</code>의 자식엔 <code class="language-plaintext highlighter-rouge">cachef</code> 가 없다. 👉 <code class="language-plaintext highlighter-rouge">cache</code>의 실패 링크인 <code class="language-plaintext highlighter-rouge">che</code> 로 이동</li>
      <li><code class="language-plaintext highlighter-rouge">che</code>의 자식엔 <code class="language-plaintext highlighter-rouge">chef</code> 가 있다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">che</code>의 성공 링크 (첫 번째 if)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">che</code>의 자식인 <code class="language-plaintext highlighter-rouge">chef</code> 로 이동</li>
    </ul>
  </li>
  <li>검색어 찾음 ! ! ! (두 번째 if)</li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115952164-79257800-a51f-11eb-95d9-2beb7e8b2ed5.png" alt="image" /></p>

<blockquote>
  <p>텍스트 : c a c a c h e f <u>c</u> a c h y</p>
</blockquote>

<ul>
  <li>현재 방문 노드 : <code class="language-plaintext highlighter-rouge">chef</code></li>
  <li>실패 링크 (while)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">chef</code>의 자식엔 <code class="language-plaintext highlighter-rouge">chefc</code> 가 없다. 👉 <code class="language-plaintext highlighter-rouge">chef</code>의 실패 링크인 루트로 이동</li>
    </ul>
  </li>
  <li>루트의 성공 링크 (첫 번째 if)
    <ul>
      <li>루트의 자식인 <code class="language-plaintext highlighter-rouge">c</code> 로 이동</li>
    </ul>
  </li>
  <li>아직 검색어 찾지 못함 (두 번째 if)</li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115952168-7e82c280-a51f-11eb-97a8-f82e89866d0b.png" alt="image" /></p>

<blockquote>
  <p>텍스트 : c a c a c h e f c <u>a</u> c h y</p>
</blockquote>

<ul>
  <li>현재 방문 노드 : <code class="language-plaintext highlighter-rouge">c</code></li>
  <li><code class="language-plaintext highlighter-rouge">c</code>의 성공 링크 (첫 번째 if)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">c</code>의 자식인 <code class="language-plaintext highlighter-rouge">ca</code> 로 이동</li>
    </ul>
  </li>
  <li>아직 검색어 찾지 못함 (두 번째 if)</li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115952175-82aee000-a51f-11eb-81a0-195852d21d27.png" alt="image" /></p>

<blockquote>
  <p>텍스트 : c a c a c h e f c a <u>c</u> h y</p>
</blockquote>

<ul>
  <li>현재 방문 노드 : <code class="language-plaintext highlighter-rouge">ca</code></li>
  <li><code class="language-plaintext highlighter-rouge">ca</code>의 성공 링크 (첫 번째 if)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ca</code>의 자식인 <code class="language-plaintext highlighter-rouge">cac</code> 로 이동</li>
    </ul>
  </li>
  <li>아직 검색어 찾지 못함 (두 번째 if)</li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115952182-88a4c100-a51f-11eb-9053-53737c5b2cb0.png" alt="image" /></p>

<blockquote>
  <p>텍스트 : c a c a c h e f c a c <u>h</u> y</p>
</blockquote>

<ul>
  <li>현재 방문 노드 : <code class="language-plaintext highlighter-rouge">cac</code></li>
  <li><code class="language-plaintext highlighter-rouge">cac</code>의 성공 링크 (첫 번째 if)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">cac</code>의 자식인 <code class="language-plaintext highlighter-rouge">cach</code> 로 이동</li>
    </ul>
  </li>
  <li>아직 검색어 찾지 못함 (두 번째 if)</li>
</ul>

<hr />

<p><img src="https://user-images.githubusercontent.com/42318591/115952185-8e020b80-a51f-11eb-9a51-3298019adeb4.png" alt="image" /></p>

<blockquote>
  <p>텍스트 : c a c a c h e f c a c h <u>y</u></p>
</blockquote>

<ul>
  <li>현재 방문 노드 : <code class="language-plaintext highlighter-rouge">cach</code></li>
  <li>실패 링크 (while)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">cach</code>의 자식엔 <code class="language-plaintext highlighter-rouge">cachy</code> 가 없다. 👉 <code class="language-plaintext highlighter-rouge">cach</code>의 실패 링크인 <code class="language-plaintext highlighter-rouge">ach</code>로 이동</li>
      <li><code class="language-plaintext highlighter-rouge">ach</code>의 자식엔 <code class="language-plaintext highlighter-rouge">achy</code> 가 있다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">ach</code>의 성공 링크 (첫 번째 if)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ach</code>의 자식인 <code class="language-plaintext highlighter-rouge">achy</code> 로 이동</li>
    </ul>
  </li>
  <li>검색어 찾음 ! ! ! (두 번째 if)</li>
</ul>

<hr />

<p>이렇게 하여 텍스트를 모두 순회하였고 탐색을 종료 :)</p>

<p><br /></p>

<h2 id="-reference">📌 Reference</h2>

<ul>
  <li><a href="http://www.yes24.com/Product/Goods/8006522">책 : 알고리즘 문제 해결 전략</a></li>
  <li><a href="https://m.blog.naver.com/kks227/220992598966">마법의 슈퍼 마리오 라이님 블로그</a></li>
</ul>

<hr />
<p><br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>🌜 개인 공부 기록용 블로그입니다. 오류나 틀린 부분이 있을 경우 
언제든지 댓글 혹은 메일로 지적해주시면 감사하겠습니다! 😄
</code></pre></div></div>

<p><a href="#" class="btn btn--primary align-right">맨 위로 이동하기</a></p>

        
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        
        <p></p>
        <h4 class="page__meta-title"><span style="font-family:'Coming Soon'; color:#fcd14f;">Algorithm</span> <span style="font-family:'Cafe24Oneprettynight';">카테고리 내 다른 글 보러가기</span></h4>
        <!--

  <nav class="pagination">
    
      <a href="/algorithm/kmp/" class="pagination--pager" title="(C++) 문자열 검색 알고리즘 : KMP 알고리즘
">이전</a>
    
    
      <a href="/programmers/138/" class="pagination--pager" title="[C++로 풀이] 호텔 방 배정 (Union-Find) ⭐⭐⭐⭐
">다음</a>
    
  </nav>

-->




  
  	
  	
  	
  	
  	


  <nav class="pagination_prev_next">
    
      <a href="/algorithm/kmp/" class="pagination_prev_next--pager"><span class="prev_next">이전 글  &nbsp</span>(C++) 문자열 검색 알고리즘 : KMP 알고리즘</a>
    
    
      <a href="#" class="pagination_prev_next--pager disabled-last-child ">가장 최근 글입니다</a>
    
  </nav>


<!--



-->



        <p></p>

        <!-- archive 중간 광고 -->
        <ins class="adsbygoogle"
             style="display:block"
            data-ad-client="ca-pub-6111782407607310"
            data-ad-slot="5458515780"
            data-ad-format="auto"
            data-full-width-responsive="true"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </section>
      <footer class="page__meta">
        
        <section class="page__share">
  
    <h4 class="page__share-title">공유하기</h4>
  

  <a href="https://twitter.com/intent/tweet?text=%28C%2B%2B%29+%EB%AC%B8%EC%9E%90%EC%97%B4+%EA%B2%80%EC%83%89+%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98+%3A+%EC%95%84%ED%98%B8-%EC%BD%94%EB%9D%BC%EC%8B%9D%28Aho-Corasick%29+%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98%20http%3A%2F%2Flocalhost%3A4000%2Falgorithm%2Fahocorasick%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Falgorithm%2Fahocorasick%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Falgorithm%2Fahocorasick%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

      </footer>
    </div>

    

  </article>

  
  
    <div class="page__related"> <!--site.data.ui-text[site.locale].related_label-->
      <h4 class="page__related-title">최근 글 10 개 :)</h4>
        
          <div class="list__item">
    <article class="archive-item">
        <div>
            <span>
              <a href="/boj/9663/">[백준 9663][💛5] N-Queen (백트래킹)</a>
            </span>
            <small> 
              <i class="fas fa-fw fa-calendar-alt" aria-hidden="true"> </i> 2021.07.26
              <!--Archive page 용-: (post -> page)-->
<!--page__taxonomy.html에서 가져 옴-->
        
        <span class="page__taxonomy">
            <span itemprop="keywords"><a href="/categories/#boj" class="page__taxonomy-item-category" rel="tag">BOJ</a>
                    
                    
                    <a href="/tags/#algorithm" class="page__taxonomy-item-tag" rel="tag">Algorithm</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#coding-test" class="page__taxonomy-item-tag" rel="tag">Coding Test</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#cpp" class="page__taxonomy-item-tag" rel="tag">Cpp</a>
                
            </span>
        </span>
            </small>
        </div>
      </article>
</div>
        
          <div class="list__item">
    <article class="archive-item">
        <div>
            <span>
              <a href="/boj/20437/">[백준 20437][💛5] 문자열 게임 2</a>
            </span>
            <small> 
              <i class="fas fa-fw fa-calendar-alt" aria-hidden="true"> </i> 2021.07.26
              <!--Archive page 용-: (post -> page)-->
<!--page__taxonomy.html에서 가져 옴-->
        
        <span class="page__taxonomy">
            <span itemprop="keywords"><a href="/categories/#boj" class="page__taxonomy-item-category" rel="tag">BOJ</a>
                    
                    
                    <a href="/tags/#algorithm" class="page__taxonomy-item-tag" rel="tag">Algorithm</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#coding-test" class="page__taxonomy-item-tag" rel="tag">Coding Test</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#cpp" class="page__taxonomy-item-tag" rel="tag">Cpp</a>
                
            </span>
        </span>
            </small>
        </div>
      </article>
</div>
        
          <div class="list__item">
    <article class="archive-item">
        <div>
            <span>
              <a href="/boj/20366/">[백준 20366][💛3] 같이 눈사람 만들래? (조합, 투포인터)</a>
            </span>
            <small> 
              <i class="fas fa-fw fa-calendar-alt" aria-hidden="true"> </i> 2021.07.26
              <!--Archive page 용-: (post -> page)-->
<!--page__taxonomy.html에서 가져 옴-->
        
        <span class="page__taxonomy">
            <span itemprop="keywords"><a href="/categories/#boj" class="page__taxonomy-item-category" rel="tag">BOJ</a>
                    
                    
                    <a href="/tags/#algorithm" class="page__taxonomy-item-tag" rel="tag">Algorithm</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#coding-test" class="page__taxonomy-item-tag" rel="tag">Coding Test</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#cpp" class="page__taxonomy-item-tag" rel="tag">Cpp</a>
                
            </span>
        </span>
            </small>
        </div>
      </article>
</div>
        
          <div class="list__item">
    <article class="archive-item">
        <div>
            <span>
              <a href="/boj/1368/">[백준 1368][💛2] 물대기 (MST, 크루스칼)</a>
            </span>
            <small> 
              <i class="fas fa-fw fa-calendar-alt" aria-hidden="true"> </i> 2021.07.26
              <!--Archive page 용-: (post -> page)-->
<!--page__taxonomy.html에서 가져 옴-->
        
        <span class="page__taxonomy">
            <span itemprop="keywords"><a href="/categories/#boj" class="page__taxonomy-item-category" rel="tag">BOJ</a>
                    
                    
                    <a href="/tags/#algorithm" class="page__taxonomy-item-tag" rel="tag">Algorithm</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#coding-test" class="page__taxonomy-item-tag" rel="tag">Coding Test</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#cpp" class="page__taxonomy-item-tag" rel="tag">Cpp</a>
                
            </span>
        </span>
            </small>
        </div>
      </article>
</div>
        
          <div class="list__item">
    <article class="archive-item">
        <div>
            <span>
              <a href="/boj/9489/">[백준 9489][💛4] 사촌</a>
            </span>
            <small> 
              <i class="fas fa-fw fa-calendar-alt" aria-hidden="true"> </i> 2021.07.25
              <!--Archive page 용-: (post -> page)-->
<!--page__taxonomy.html에서 가져 옴-->
        
        <span class="page__taxonomy">
            <span itemprop="keywords"><a href="/categories/#boj" class="page__taxonomy-item-category" rel="tag">BOJ</a>
                    
                    
                    <a href="/tags/#algorithm" class="page__taxonomy-item-tag" rel="tag">Algorithm</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#coding-test" class="page__taxonomy-item-tag" rel="tag">Coding Test</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#cpp" class="page__taxonomy-item-tag" rel="tag">Cpp</a>
                
            </span>
        </span>
            </small>
        </div>
      </article>
</div>
        
          <div class="list__item">
    <article class="archive-item">
        <div>
            <span>
              <a href="/boj/4358/">[백준 4358][💛5] 생태학 (map, 소수 출력)</a>
            </span>
            <small> 
              <i class="fas fa-fw fa-calendar-alt" aria-hidden="true"> </i> 2021.07.24
              <!--Archive page 용-: (post -> page)-->
<!--page__taxonomy.html에서 가져 옴-->
        
        <span class="page__taxonomy">
            <span itemprop="keywords"><a href="/categories/#boj" class="page__taxonomy-item-category" rel="tag">BOJ</a>
                    
                    
                    <a href="/tags/#algorithm" class="page__taxonomy-item-tag" rel="tag">Algorithm</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#coding-test" class="page__taxonomy-item-tag" rel="tag">Coding Test</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#cpp" class="page__taxonomy-item-tag" rel="tag">Cpp</a>
                
            </span>
        </span>
            </small>
        </div>
      </article>
</div>
        
          <div class="list__item">
    <article class="archive-item">
        <div>
            <span>
              <a href="/boj/1987/">[백준 1987][💛4] 알파벳 (DFS, 백트래킹)</a>
            </span>
            <small> 
              <i class="fas fa-fw fa-calendar-alt" aria-hidden="true"> </i> 2021.07.11
              <!--Archive page 용-: (post -> page)-->
<!--page__taxonomy.html에서 가져 옴-->
        
        <span class="page__taxonomy">
            <span itemprop="keywords"><a href="/categories/#boj" class="page__taxonomy-item-category" rel="tag">BOJ</a>
                    
                    
                    <a href="/tags/#algorithm" class="page__taxonomy-item-tag" rel="tag">Algorithm</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#coding-test" class="page__taxonomy-item-tag" rel="tag">Coding Test</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#cpp" class="page__taxonomy-item-tag" rel="tag">Cpp</a>
                
            </span>
        </span>
            </small>
        </div>
      </article>
</div>
        
          <div class="list__item">
    <article class="archive-item">
        <div>
            <span>
              <a href="/boj/3980/">[백준 3980][💛4] 선발 명단 (DFS, 백트래킹)</a>
            </span>
            <small> 
              <i class="fas fa-fw fa-calendar-alt" aria-hidden="true"> </i> 2021.07.10
              <!--Archive page 용-: (post -> page)-->
<!--page__taxonomy.html에서 가져 옴-->
        
        <span class="page__taxonomy">
            <span itemprop="keywords"><a href="/categories/#boj" class="page__taxonomy-item-category" rel="tag">BOJ</a>
                    
                    
                    <a href="/tags/#algorithm" class="page__taxonomy-item-tag" rel="tag">Algorithm</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#coding-test" class="page__taxonomy-item-tag" rel="tag">Coding Test</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#cpp" class="page__taxonomy-item-tag" rel="tag">Cpp</a>
                
            </span>
        </span>
            </small>
        </div>
      </article>
</div>
        
          <div class="list__item">
    <article class="archive-item">
        <div>
            <span>
              <a href="/boj/20924/">[백준 20924][💛4] 트리의 기둥과 가지 (DFS, 트리)</a>
            </span>
            <small> 
              <i class="fas fa-fw fa-calendar-alt" aria-hidden="true"> </i> 2021.07.10
              <!--Archive page 용-: (post -> page)-->
<!--page__taxonomy.html에서 가져 옴-->
        
        <span class="page__taxonomy">
            <span itemprop="keywords"><a href="/categories/#boj" class="page__taxonomy-item-category" rel="tag">BOJ</a>
                    
                    
                    <a href="/tags/#algorithm" class="page__taxonomy-item-tag" rel="tag">Algorithm</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#coding-test" class="page__taxonomy-item-tag" rel="tag">Coding Test</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#cpp" class="page__taxonomy-item-tag" rel="tag">Cpp</a>
                
            </span>
        </span>
            </small>
        </div>
      </article>
</div>
        
          <div class="list__item">
    <article class="archive-item">
        <div>
            <span>
              <a href="/boj/20164/">[백준 20164][💛5] 홀수 홀릭 호석</a>
            </span>
            <small> 
              <i class="fas fa-fw fa-calendar-alt" aria-hidden="true"> </i> 2021.07.10
              <!--Archive page 용-: (post -> page)-->
<!--page__taxonomy.html에서 가져 옴-->
        
        <span class="page__taxonomy">
            <span itemprop="keywords"><a href="/categories/#boj" class="page__taxonomy-item-category" rel="tag">BOJ</a>
                    
                    
                    <a href="/tags/#algorithm" class="page__taxonomy-item-tag" rel="tag">Algorithm</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#coding-test" class="page__taxonomy-item-tag" rel="tag">Coding Test</a><span class="sep"> </span>
                
                    
                    
                    <a href="/tags/#cpp" class="page__taxonomy-item-tag" rel="tag">Cpp</a>
                
            </span>
        </span>
            </small>
        </div>
      </article>
</div>
        
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ansohxxn.github.io -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6111782407607310"
     data-ad-slot="5978510098"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>팔로우:</strong></li>
    

    
      
        
          <li><a href="https://github.com/wkdalsrud" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> 피드</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 민경. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    <aside class="sidebar__top">
      <a href="#site-nav"> <i class="fas fa-angle-double-up fa-2x"></i></a>
    </aside>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>







    
  <script>
    var disqus_config = function () {
      this.page.url = "http://localhost:4000/algorithm/ahocorasick/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/algorithm/ahocorasick"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://gieogjeojangso.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" defer
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>


  </body>
</html>
