I"G<h1 id="-줄-서는-방법">📌 줄 서는 방법</h1>

<blockquote>
  <p>난이도 ⭐⭐⭐</p>
</blockquote>

<h2 id="-문제">🚀 문제</h2>

<p><img src="https://user-images.githubusercontent.com/42318591/108158804-11227200-7129-11eb-9683-64c93f0c67e7.png" alt="image" /></p>

<p><br /></p>

<h2 id="-내-풀이">🚀 내 풀이</h2>

<h3 id="-1-차-풀이--시간초과">✈ 1 차 풀이 ❌ (+시간초과⏰)</h3>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">solution</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">answer</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
    
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">q</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
        <span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">to_string</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    
    <span class="kt">long</span> <span class="kt">long</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">do</span><span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">count</span><span class="o">++</span> <span class="o">==</span> <span class="n">k</span><span class="p">)</span>
            <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="n">next_permutation</span><span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">q</span><span class="p">.</span><span class="n">end</span><span class="p">()));</span>
    
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">answer</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">stoi</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    
    <span class="k">return</span> <span class="n">answer</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/42318591/108158854-2bf4e680-7129-11eb-9f18-6f6957adcf28.png" alt="image" /></p>

<p>단순하게 모든 순열을 다 구하되 <code class="language-plaintext highlighter-rouge">k</code>번째의 순열에서 멈추는 식으로 코드를 짰었다. 사전 순서 크기를 기준으로 다음 순열이 결정될 수 있도록 <code class="language-plaintext highlighter-rouge">string</code> 벡터의 순열을 구했었다.</p>

<p>역시 이렇게 단순하게 풀릴 문제였으면 레벨 3 문제가 아니였겠즤..?ㅠ ㅠ</p>

<p>이렇게 모든 순열을 구해나가는 경우엔 <code class="language-plaintext highlighter-rouge">O(n!)</code> 시간 복잡도에 도달하게 된다. 그러니 다른 방법을 찾아야 한다.</p>

<p>굳이 처음부터 순열을 1번째부터 <code class="language-plaintext highlighter-rouge">k</code>번째까지 구하지 않아도, <code class="language-plaintext highlighter-rouge">k</code>번째의 <u>순열의 위치가 어디일지 알아낼 수가 있다.</u></p>

<p><br /></p>

<h3 id="-2-차-풀이-">✈ 2 차 풀이 ⭕</h3>

<p>💡 <strong>k번째 순열이 어떤 모습인지 순회하지 않고 바로 알아내는 방법</strong></p>

<blockquote>
  <p>n = 4, k = 16 을 예로 들어 보자. 즉 [1, 2, 3, 4]로 이루어지는 순열의 16번째 순열이 어떤 모습인지 규칙을 찾아내보자.</p>
</blockquote>

<ul>
  <li>[1, 2, 3, 4] 즉 <code class="language-plaintext highlighter-rouge">n = 4</code>의 순열은 총 <code class="language-plaintext highlighter-rouge">4! = 24</code>가지가 나올 수 있다. <strong>4! 는 4 * 3! 와도 같다.</strong>
    <ul>
      <li>[1,2,3,4] 순열 순서의 규칙 (총 4 * 3! = 24개) 📢 [1,2,3,4] 순열 내에서 16 번째 찾기
        <ul>
          <li>3! = 6 개 👉 1 로 시작하는 [2, 3, 4] 순열 👉 1 ~ 6(=1x3!) 번째</li>
          <li>3! = 6 개 👉 2 로 시작하는 [1, 3, 4] 순열 👉 7 ~ 12(=2x3!) 번째</li>
          <li>3! = 6 개 👉 3 로 시작하는 [1, 2, 4] 순열 👉 13 ~ 18(=3x3!) 번째</li>
          <li>3! = 6 개 👉 4 로 시작하는 [1, 2, 3] 순열 👉 19 ~ 24(=4x3!=4!) 번째</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">16</code>번째 순열은 <em>2 x 3! &lt; 16 &lt;= 3 x 3!</em> 을 만족하기 때문에 <strong>3 으로 시작하는 [1, 2, 4] 순열</strong> 에 위치할 것이라는 것을 알 수 있다!!
        <ul>
          <li>✔ “16번째 순열의 첫 번째”는 무조건 <code class="language-plaintext highlighter-rouge">3</code>이 된다는 것을 확인할 수 있다. 16번째가 <code class="language-plaintext highlighter-rouge">3</code>으로 시작하는 순열인 13번째~18번째에 속하기 때문이다. <u>이제 [3] 은 확정됐으니 남은 [1,2,4] 순열 내에서 16 - 12 = 4 번째에 해당하는 순열을 찾으면 된다.</u>
            <ul>
              <li>[1,2,4] 순열 순서의 규칙 (총 3 * 2! = 6개) 📢 [1,2,4] 순열 내에서 4 번째 찾기
                <ul>
                  <li>2! = 2개 👉 1 로 시작하는 [2, 4] 순열 👉 1 ~ 2(=1x2!) 번째</li>
                  <li>2! = 2개 👉 2 로 시작하는 [1, 4] 순열 👉 3 ~ 4(=2x2!) 번째</li>
                  <li>2! = 2개 👉 4 로 시작하는 [1, 2] 순열 👉 5 ~ 6(=3x2!) 번째</li>
                </ul>
              </li>
              <li><code class="language-plaintext highlighter-rouge">4</code>번째 순열은 <em>1 x 2! &lt; 4 &lt;= 2 x 2!</em> 을 만족하기 때문에 <strong>2 로 시작하는 [1, 4] 순열</strong> 에 위치할 것이라는 것을 알 수 있다!!
                <ul>
                  <li>✔ “16번째 순열의 두 번째”는 무조건 <code class="language-plaintext highlighter-rouge">2</code>가 된다는 것을 확인할 수 있다. 4번째가 <code class="language-plaintext highlighter-rouge">2</code>로 시작하는 순열인 3번째~4번째에 속하기 때문이다. <u>이제 [3, 2]은 확정됐으니 남은 [1,4] 순열 내에서 4 - 2 = 2 번째에 해당하는 순열을 찾으면 된다.</u>
                    <ul>
                      <li>[1,4] 순열 순서의 규칙 (총 2 * 1! = 2개) 📢 [1,4] 순열 내에서 2 번째 찾기
                        <ul>
                          <li>1! = 1개 👉 1 로 시작하는 [4] 순열 👉 1 (=1x1!) 번째</li>
                          <li>1! = 1개 👉 4 로 시작하는 [1] 순열 👉 2 (=2x1!) 번째</li>
                        </ul>
                      </li>
                      <li><code class="language-plaintext highlighter-rouge">2</code>번째 순열은 <em>1 x 1! &lt; 2 &lt;= 2 x 1!</em> 을 만족하기 때문에 <strong>4 로 시작하는 [1] 순열</strong> 에 위치할 것이라는 것을 알 수 있다!!
                        <ul>
                          <li>✔ “16번째 순열의 세 번째”는 무조건 <code class="language-plaintext highlighter-rouge">4</code>가 된다는 것을 확인할 수 있다. 2번째가 <code class="language-plaintext highlighter-rouge">4</code>로 시작하는 순열인 2번째가 되기 때문이다. <u>이제 [3, 2, 4]은 확정됐으니 남은 [1] 순열 내에서 2 - 2 = 0 번째에 해당하는 순열을 찾으면 된다.</u>
                            <ul>
                              <li>✔ “16번째 순열의 마지막 네 번째”는 무조건 <code class="language-plaintext highlighter-rouge">1</code>이 된다는 것을 확인할 수 있다. 하나밖에 안 남았기 때문이다. <u>남은 순열이 [1] 하나 남았기 때문에 나머지 1을 붙여서 [3, 2, 4, 1] 가 완성된다.</u> 이게 바로 16 번째 순열이 된다.</li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>위 규칙을 아래 코드로 작성했다.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">long</span> <span class="kt">long</span> <span class="nf">perm</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="c1">// n! 값 구하기</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">perm</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">func</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">v</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">answer</span><span class="p">,</span> <span class="kt">long</span> <span class="kt">long</span><span class="o">&amp;</span> <span class="n">k</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">answer</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">long</span> <span class="kt">long</span> <span class="n">p</span> <span class="o">=</span> <span class="n">perm</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span> 
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">p</span> <span class="o">&gt;=</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">answer</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]);</span> <span class="c1">// i번째기 때문에 인덱스론 i-1</span>
            <span class="n">v</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span> <span class="o">+</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
            <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">-</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">p</span><span class="p">;</span>
            <span class="n">func</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="n">k</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">solution</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">k</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">answer</span><span class="p">;</span>

    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
        <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// n=4의 경우 v = [1,2,3,4] 에서 시작</span>

    <span class="n">func</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="n">k</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">answer</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/42318591/108163672-c0b01200-7132-11eb-9eb9-22292741eff6.png" alt="image" /></p>

<ul>
  <li><em>func</em> 함수의 재귀 호출 과정을 위의 n = 4, k = 16 을 예로 설명해본다면
    <ul>
      <li><code class="language-plaintext highlighter-rouge">v</code>는 [1, 2, 3, 4] 👉 [1, 2, 4] 👉 [1, 4] 👉 [1] 로 변해갈 것이다. 이 <code class="language-plaintext highlighter-rouge">v</code>의 사이즈가 1이 되었을 때 남은 하나를 <code class="language-plaintext highlighter-rouge">answer</code>에 추가하고 재귀를 종료한다.
        <ul>
          <li>이에 따라 <code class="language-plaintext highlighter-rouge">p</code>는 3! 👉 2! 👉 1!</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">answer</code>는 [3] 👉 [3, 2] 👉 [3, 2, 4] 👉 [3, 2, 4, 1]로 변해갈 것이다.</li>
      <li><code class="language-plaintext highlighter-rouge">k</code>는 16 👉 12 👉 4 👉 2 👉 0</li>
    </ul>
  </li>
  <li>매 재귀마다 <em>if (i * p &gt;= k)</em> 조건을 통해, 현재의 <code class="language-plaintext highlighter-rouge">k</code>가 어떤 숫자로 시작하는 순열에 해당하는지 찾아낸다.</li>
</ul>

<p>O(n!) 에서 O(n^2) 정도로 시간 복잡도가 확 줄어들었다.</p>

<hr />
<p><br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>🌜 개인 공부 기록용 블로그입니다. 오류나 틀린 부분이 있을 경우 
언제든지 댓글 혹은 메일로 지적해주시면 감사하겠습니다! 😄
</code></pre></div></div>

<p><a href="#" class="btn btn--primary align-right">맨 위로 이동하기</a></p>
:ET