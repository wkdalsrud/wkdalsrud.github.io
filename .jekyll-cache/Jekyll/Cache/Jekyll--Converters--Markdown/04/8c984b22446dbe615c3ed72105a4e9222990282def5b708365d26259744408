I"*<h1 id="-n-queen">📌 N-Queen</h1>

<blockquote>
  <p>난이도 ⭐⭐⭐</p>
</blockquote>

<h2 id="-문제">🚀 문제</h2>

<p><img src="https://user-images.githubusercontent.com/42318591/108298684-b2203400-71e0-11eb-8915-8b770cb30a84.png" alt="image" /></p>

<p><br /></p>

<h2 id="-내-풀이-">🚀 내 풀이 ⭕</h2>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">DFS</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;&gt;</span> <span class="n">queen</span><span class="p">,</span> <span class="kt">int</span><span class="o">&amp;</span> <span class="n">answer</span><span class="p">,</span> <span class="kt">int</span> <span class="n">row</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">row</span> <span class="o">==</span> <span class="n">queen</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">answer</span><span class="o">++</span><span class="p">;</span>            
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="n">queen</span><span class="p">[</span><span class="n">row</span><span class="p">].</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">col</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 1️⃣ 첫번째 행당 하나만 들어갈 수 잇음</span>
        <span class="kt">bool</span> <span class="n">isOk</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">row</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">,</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 2️⃣3️⃣4️⃣ 를 검사하자. (이전 행들에서 검사)</span>
            <span class="kt">bool</span> <span class="n">con1</span> <span class="o">=</span> <span class="n">queen</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">col</span><span class="p">];</span> <span class="c1">// 2️⃣같은 열에 놓여진 퀸이 있는지</span>
            <span class="kt">bool</span> <span class="n">con2</span> <span class="o">=</span> <span class="n">col</span> <span class="o">-</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">queen</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">col</span> <span class="o">-</span> <span class="n">j</span><span class="p">];</span> <span class="c1">// 3️⃣ 왼쪽 대각선에 놓여진 퀸이 있는지</span>
            <span class="kt">bool</span> <span class="n">con3</span> <span class="o">=</span> <span class="n">col</span> <span class="o">+</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">queen</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">queen</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">col</span> <span class="o">+</span> <span class="n">j</span><span class="p">];</span> <span class="c1">// 4️⃣ 오른쪽 대각선에 놓여진 퀸이 있는지</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">con1</span> <span class="o">||</span> <span class="n">con2</span> <span class="o">||</span> <span class="n">con3</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 셋 중 하나라도 해당 된다면 이 queen[row][col] 자리에 퀸을 놓을 수 없다.</span>
                <span class="n">isOk</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">isOk</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 0 ~ row-1 행들을 모두 검사했어도 위 검사를 통과했다면 queen[row][col]은 놓여질 수 있다! </span>
            <span class="n">queen</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">// 퀸 놓기</span>
            <span class="n">DFS</span><span class="p">(</span><span class="n">queen</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// 다음 행 검사하러 </span>
            <span class="n">queen</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span> <span class="c1">// 퀸 지우기. </span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">solution</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">answer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;&gt;</span> <span class="n">queen</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">false</span><span class="p">));</span>
    <span class="n">DFS</span><span class="p">(</span><span class="n">queen</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">answer</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p>성공 👉 <code class="language-plaintext highlighter-rouge">n</code> 줄의 퀸을 다 채웠다면 <strong>BACK 하기</strong></p>
</blockquote>

<blockquote>
  <p>실패 👉 <u>현재의 행의 이전 행들에서</u> 1️⃣같은 행 2️⃣같은 열 3️⃣왼쪽 대각선 4️⃣오른쪽 대각선 에 이미 퀸이 놓여져 있다면 해당 자리에 퀸을 놓을 수 없으므로 <strong>BACK 하기</strong></p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">queen</code>에 퀸을 놓기로 결정한 자리를 방문 체크한다.</li>
  <li>DFS
    <ul>
      <li>재귀 단계 👉 “행”단위</li>
      <li>각 단계마다(= 즉, 행마다) 모든 열들에 차례대로 퀸을 놓아보고 놓을 수 있는지 검사</li>
    </ul>
  </li>
  <li>“1️⃣ 같은 행” 조건의 경우 어차피 for문을 통해 해당 “열”에서 하나씩 차례대로 지정해보므로 이 for문만으로도 첫번째 조건은 이미 만족이다.</li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="k">if</span> <span class="p">(</span><span class="n">isOk</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 0 ~ row-1 행들을 모두 검사했어도 위 검사를 통과했다면 queen[row][col]은 놓여질 수 있다! </span>
            <span class="n">queen</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">// 퀸 놓기</span>
            <span class="n">DFS</span><span class="p">(</span><span class="n">queen</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// 다음 행 검사하러 </span>
            <span class="n">queen</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span> <span class="c1">// 퀸 지우기. </span>
        <span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>방문 체크 해제 (퀸 지우기)
    <ul>
      <li>n줄 채우기를 실패하든 성공하든 일단 돌아왔다면 다음 for문의 DFS (다음 열을 선택한것에서 뻗어나가는 DFS) 에서 이전 행들에서 2️⃣3️⃣4️⃣ 검사할 때 퀸이 놓여져 있는 걸로 체크되면 안되기 때문에. 실패했든 성공했든 지워주어야 함.</li>
    </ul>
  </li>
</ul>

<hr />
<p><br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>🌜 개인 공부 기록용 블로그입니다. 오류나 틀린 부분이 있을 경우 
언제든지 댓글 혹은 메일로 지적해주시면 감사하겠습니다! 😄
</code></pre></div></div>

<p><a href="#" class="btn btn--primary align-right">맨 위로 이동하기</a></p>
:ET