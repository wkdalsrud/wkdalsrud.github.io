I"V<h1 id="dfs-여행-경로">[DFS] 여행 경로</h1>

<blockquote>
  <p>난이도 ⭐⭐⭐</p>
</blockquote>

<h2 id="문제">문제</h2>

<p><img src="https://user-images.githubusercontent.com/42318591/97068193-7db8b480-1600-11eb-991a-fa1e79e9f9b1.png" alt="image" /></p>

<p><br /></p>

<h2 id="내-풀이-">내 풀이 ⭕</h2>

<p>DFS에 관해 배운게 많았던 문제라고 생각함! 프로그래머스의 질문하기에 올려주신 다른 분들의 테스트 케이스가 도움 많이 되었다.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">bool</span> <span class="nf">compare</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
		<span class="k">return</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
	<span class="k">return</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">DFS</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">tickets</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">answer</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">usedTickets</span><span class="p">,</span> <span class="n">string</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">depth</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">depth</span> <span class="o">==</span> <span class="n">usedTickets</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">tickets</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">tickets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">start</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">usedTickets</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
		<span class="p">{</span>
			<span class="n">usedTickets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
			<span class="n">answer</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">tickets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">DFS</span><span class="p">(</span><span class="n">tickets</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="n">usedTickets</span><span class="p">,</span> <span class="n">tickets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
			    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="n">usedTickets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
    <span class="n">answer</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">solution</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">tickets</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="n">sort</span><span class="p">(</span><span class="n">tickets</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">tickets</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">compare</span><span class="p">);</span>
         
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">answer</span><span class="p">;</span>
    <span class="n">answer</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="s">"ICN"</span><span class="p">);</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">usedTickets</span><span class="p">(</span><span class="n">tickets</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>
    
    <span class="n">DFS</span><span class="p">(</span><span class="n">tickets</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="n">usedTickets</span><span class="p">,</span> <span class="s">"ICN"</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    
    <span class="k">return</span> <span class="n">answer</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="https://user-images.githubusercontent.com/42318591/97068200-8f01c100-1600-11eb-9975-b457e37e6bb2.png" alt="image" /></p>

<blockquote>
  <p>✨<code class="language-plaintext highlighter-rouge">DFS</code>✨ 이 문제의 포인트</p>
</blockquote>

<ol>
  <li>모든 항공권을 한번에 다 사용하는게 가능하며 또 모든 항공권을 전부 다 사용 해야 한다.
    <ul>
      <li>따라서 아직 항공권을 다 쓰지도 못했는데 막혔다면, 빠꾸해야 한다. <strong>테스트 케이스 [[ICN, A], [ICN, B], [B, ICN]] 같은 경우, 아직 항공권 다 쓰지도 못했는데 ICN - A 항공권을 사용하려는 경우엔, A 에서 출발하는 항공권이 없기 때문에 다시 A 방문을 취소하고 빠꾸해야 한다.</strong></li>
      <li>재귀의 종료 조건은</li>
    </ul>
  </li>
  <li>재귀단계 마다 <code class="language-plaintext highlighter-rouge">answer</code>에 해당 방문 도시를 저장해놔야 하며, 빠꾸하고 방문 취소해야 하는 경우도 생길 수 있다.</li>
  <li>모든 티켓을 다 쓰고 모든 도시를 방문하는데에 성공했다면 더 이상 또 다른 조건의 재귀 함수를 호출하지 않고, 즉 또 다른 경로가 있나 볼 필요 없이 그냥 모든 과정을 다 끝내야만 한다.
    <ul>
      <li>따라서 DFS 함수를 <code class="language-plaintext highlighter-rouge">bool</code> 타입으로 하여 성공 여부를 받았고 성공했다면 <code class="language-plaintext highlighter-rouge">return</code>하여 for 문 내에서 더 이상 다음 도시를 살펴보지 않고 그냥 전부 빠져나오도록 한다.</li>
      <li>이 과정이 없다면 모든 도시를 다 방문했음에도 불구하고 빠져나오는 과정에서 다음 for문 반복을 돌기 때문에 <code class="language-plaintext highlighter-rouge">answer</code>에 계~속 경로들이 추가로 저장된다.</li>
    </ul>
  </li>
  <li>방문 도시는 중복이 될 수 있다. ICN 👉 A 👉 ICN 가능. 항공권 중복 사용이 안되는 것 뿐! 항공권은 일회성.</li>
</ol>

<ul>
  <li><strong>재귀 종료 조건</strong>
    <ul>
      <li>모든 항공권을 다 씀  <em>if (depth == usedTickets.size())</em>
        <ul>
          <li>👉 성공! <code class="language-plaintext highlighter-rouge">true</code> 리턴</li>
        </ul>
      </li>
      <li>모든 항공권을 다 쓰지도 않았고 (<em>if (depth == usedTickets.size())</em> 에 걸리지 않음) 더 이상 갈 수 있는 곳도 없다면 (for문 다 돌 때까지 <em>if(DFS) return true</em> 를 만나지 못 함)
        <ul>
          <li>👉 실패! <code class="language-plaintext highlighter-rouge">false</code> 리턴</li>
          <li>또한 방금 방문한 도시로서 <code class="language-plaintext highlighter-rouge">temp</code>에 추가했었던 도시를 삭제해야 한다.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bool</span> <span class="nf">compare</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
		<span class="k">return</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
	<span class="k">return</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span>

<span class="n">sort</span><span class="p">(</span><span class="n">tickets</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">tickets</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">compare</span><span class="p">);</span>
</code></pre></div></div>

<p>같은 도시라면 알파벳 순서가 더 앞서는 도착 도시를 가진 항공권을 선택해야 하므로 알파벳 순서대로 <code class="language-plaintext highlighter-rouge">tickets</code>를 오름차순 정렬한다. 같은 도시라면 도착지에 따라 정렬하도록 한다.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">answer</span><span class="p">;</span>
    <span class="n">answer</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="s">"ICN"</span><span class="p">);</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">usedTickets</span><span class="p">(</span><span class="n">tickets</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>
    
    <span class="n">DFS</span><span class="p">(</span><span class="n">tickets</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="n">usedTickets</span><span class="p">,</span> <span class="n">temp</span><span class="p">,</span> <span class="s">"ICN"</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="kt">bool</span> <span class="nf">DFS</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&gt;</span> <span class="n">tickets</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;&amp;</span> <span class="n">answer</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">usedTickets</span><span class="p">,</span> <span class="n">string</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">depth</span><span class="p">)</span>
    <span class="p">{</span>
</code></pre></div></div>

<ul>
  <li>경로는 <code class="language-plaintext highlighter-rouge">temp</code>에 저장하고 최종적으로 모든 항공권을 다 쓴 것이 확인 되었을 때 <code class="language-plaintext highlighter-rouge">answer</code>에 <code class="language-plaintext highlighter-rouge">temp</code>를 복사할 것이다.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">temp</code>에 미리 시작 도시인 “ICN”을 넣어 둔다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">usedTickets</code> 👉 사용한 항공권은 True 체크 표시 한다.</li>
  <li>DFS 의 각각 재귀 단계는 현재 항공권을 통해 방문 중인 도시와 같다.</li>
  <li>DFS 함수 매개 변수
    <ul>
      <li><code class="language-plaintext highlighter-rouge">tickets</code> 항공권들</li>
      <li><code class="language-plaintext highlighter-rouge">answer</code> 경로를 저장할 벡터. solution 함수 내에서 실행한 최초의 DFS 함수 실행이 끝난 후 경로들이 <code class="language-plaintext highlighter-rouge">answer</code>에 반영 되야 하므로 참조로 넘긴다.
        <ul>
          <li>함수 종료 후에도 남아야 하므로 참조로 넘김</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">usedTickets</code> 사용한 항공권 체크. <code class="language-plaintext highlighter-rouge">tickets</code>와 사이즈 같음.
        <ul>
          <li>참조로 넘기지 않는다. 도시 방문 경로마다, 즉 각각 다른 재귀 함수들마다 항공권 사용 순서라던가 사용 상태는 달라야 한다.</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">start</code> 현재 방문 중인 도시
        <ul>
          <li>for문으로 <code class="language-plaintext highlighter-rouge">tickets</code>를 살피며 <code class="language-plaintext highlighter-rouge">start</code>에서 출발하며 아직 안 쓴 항공권을 찾아야 한다.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">if</span> <span class="p">(</span><span class="n">depth</span> <span class="o">==</span> <span class="n">usedTickets</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</code></pre></div></div>

<p>성공 종료 조건은 이렇다. 항공권 다 썼다면 성공이므로 <code class="language-plaintext highlighter-rouge">true</code>를 리턴하고 깊이 탐색을 끝낸다.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">tickets</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">tickets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">start</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">usedTickets</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
		<span class="p">{</span>
			<span class="n">usedTickets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
			<span class="n">answer</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">tickets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">DFS</span><span class="p">(</span><span class="n">tickets</span><span class="p">,</span> <span class="n">answer</span><span class="p">,</span> <span class="n">usedTickets</span><span class="p">,</span> <span class="n">tickets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
			    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
            <span class="n">usedTickets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
    <span class="n">answer</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>실패 종료 조건은 현재의 방문 경로에서 현재 해당 항공권을 사용하면 모든 항공권을 다 사용할 수가 없는 경우이다.
    <ul>
      <li>for문을 다 돌면서 티켓을 살펴 봐도 이 도시에서 갈 수 있는 항공권이 없거나</li>
      <li>있더라도 DFS 가 성공적으로 true 를 리턴해준 경우가 없었다면</li>
      <li>즉 <em>if(DFS) return true</em> 를 한번도 만나지 못했다면 현재의 그 도시는 <code class="language-plaintext highlighter-rouge">answer.pop_back()</code> 방문을 취소하고 <code class="language-plaintext highlighter-rouge">false</code>를 리턴해야 한다.</li>
    </ul>
  </li>
  <li>모든 항공권을 다 사용하는데에 성공했다면 더 이상 for 문 다른 반복을 돌지 않고 전부 다 끝내야 한다. <code class="language-plaintext highlighter-rouge">return true</code>. 이 과정이 없다면 모든 항공권을 다 사용했는데도 불구하고 빠꾸하면서 또 다른 항공권을 또 써서 방문하게 된다.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">usedTickets</code>는 참조가 아니기 때문에 빠꾸하면 다시 이전 재귀 단계의 상태로 리셋 될 테니까 방문이 가능해짐</li>
      <li>따라서 아예 더 이상 다른 경로의 깊이 탐색을 못하도록 빠져 나와야 한다.</li>
    </ul>
  </li>
  <li>해당 항공권을 지금 썼을 때, 모든 항공권을 다 쓰는데에 실패하게 된다면, 그래서 <em>if(DFS) return true</em> 에 해당 되지 않았다면
    <ul>
      <li><code class="language-plaintext highlighter-rouge">usedTickets[i] = false</code> 이 항공권은 추후 알맞는 경우에 다시 사용을 해야 하기 때문에 다시 false 로 바꿔준다.</li>
    </ul>
  </li>
</ul>

<hr />
<p><br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>🌜 개인 공부 기록용 블로그입니다. 오류나 틀린 부분이 있을 경우 
언제든지 댓글 혹은 메일로 지적해주시면 감사하겠습니다! 😄
</code></pre></div></div>

<p><a href="#" class="btn btn--primary align-right">맨 위로 이동하기</a></p>
:ET